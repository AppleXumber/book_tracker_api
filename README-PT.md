
  **<summary>API Book Tracker</summary>**

Uma API para gerenciar livros e leituras, permitindo que os usuários registrem seus livros, acompanhem o progresso da leitura e gerenciem a autenticação via JWT.
* (Readme generated by AI. Errors and inaccuracies may occur.)


---

<details>
  <summary>Descrição</summary>

A **API Book Tracker** oferece funcionalidades para registrar livros, rastrear o progresso da leitura e autenticação de usuários com tokens JWT. Com suporte para gerenciamento de livros e acompanhamento de leituras, é uma solução completa para quem deseja organizar suas leituras e monitorar seu progresso.

</details>

---

<details>
  <summary>Funcionalidades</summary>

- **Autenticação de Usuário**: Registro, login e geração de tokens de acesso.
- **Gerenciamento de Livros**: Adicionar, editar e recuperar livros.
- **Acompanhamento de Leituras**: Registrar o progresso diário de leitura (páginas, capítulos).
- **Tokens de Acesso e Refresh**: Geração de tokens JWT de acesso e refresh tokens criptografados para renovação de sessão.

</details>

---

<details>
  <summary>Tecnologias Usadas</summary>

- **Spring Boot 3.4.x**
- **Kotlin 1.9.25**
- **Spring Security** com autenticação JWT
- **JPA** para persistência de dados com MySQL
- **JWT (JSON Web Token)** para autenticação e geração de tokens
- **AES** para criptografar os refresh tokens

</details>

---

<details>
  <summary>Como Rodar o Projeto</summary>

### Pré-requisitos

- Java 17 ou superior
- Kotlin 1.9.25
- MySQL ou banco de dados compatível

### Passos para Rodar

1. Clone este repositório:

   ```bash
   git clone https://github.com/seu-usuario/book_tracker_api.git
   ```

2. Navegue até o diretório do projeto:

   ```bash
   cd book_tracker_api
   ```

3. Instale as dependências e execute o projeto:

   ```bash
   mvn spring-boot:run
   ```

4. Acesse a aplicação no navegador em `http://localhost:8080`.

</details>

---

<details>
  <summary>Endpoints</summary>

Aqui estão os principais endpoints da **API Book Tracker** com suas explicações:

### **Autenticação e Registro**

#### **POST /auth/register**
- **Descrição**: Registra um novo usuário no sistema.
- **Requisição**:
  ```json
  {
    "username": "john_doe",
    "email": "john@example.com",
    "password": "senhaSegura123"
  }
  ```
- **Resposta**: Retorna as informações do usuário criado.
  ```json
  {
    "id": "id-único-do-usuario",
    "username": "john_doe",
    "email": "john@example.com",
    "createdAt": "2025-03-16T10:00:00"
  }
  ```

#### **POST /auth/login**
- **Descrição**: Faz o login de um usuário e retorna o token de acesso e o refresh token.
- **Requisição**:
  ```json
  {
    "username": "john_doe",
    "password": "senhaSegura123"
  }
  ```
- **Resposta**: Retorna o token de acesso e o refresh token.
  ```json
  {
    "accessToken": "seu-token-de-acesso",
    "refreshToken": "seu-refresh-token"
  }
  ```

#### **POST /auth/refresh**
- **Descrição**: Gera um novo token de acesso utilizando o refresh token.
- **Requisição**:
  ```json
  {
    "refreshToken": "seu-refresh-token"
  }
  ```
- **Resposta**: Retorna um novo token de acesso.
  ```json
  {
    "accessToken": "novo-token-de-acesso"
  }
  ```

### **Gerenciamento de Livros**

#### **POST /books**
- **Descrição**: Adiciona um novo livro ao sistema.
- **Requisição**:
  ```json
  {
    "title": "O Senhor dos Anéis",
    "author": "J.R.R. Tolkien",
    "isbn": "978-0-345-33968-3",
    "genre": "Fantasia",
    "language": "Português",
    "pages": 1216
  }
  ```
- **Resposta**: Retorna o livro adicionado.
  ```json
  {
    "id": "id-único-do-livro",
    "title": "O Senhor dos Anéis",
    "author": "J.R.R. Tolkien",
    "isbn": "978-0-345-33968-3",
    "genre": "Fantasia",
    "language": "Português",
    "pages": 1216,
    "createdAt": "2025-03-16T10:00:00"
  }
  ```

#### **GET /books**
- **Descrição**: Recupera todos os livros registrados no sistema, com paginação e ordenação.
- **Requisição**:
  - `page`: Número da página (padrão: 0)
  - `size`: Número de livros por página (padrão: 10)
  - `sort`: Campo para ordenar (padrão: "updatedAt")
  - `direction`: Direção de ordenação (padrão: "DESC")
- **Resposta**: Retorna uma lista paginada de livros.
  ```json
  {
    "content": [
      {
        "id": "id-único-do-livro",
        "title": "O Senhor dos Anéis",
        "author": "J.R.R. Tolkien",
        "isbn": "978-0-345-33968-3",
        "genre": "Fantasia",
        "language": "Português",
        "pages": 1216,
        "createdAt": "2025-03-16T10:00:00"
      }
    ],
    "pageable": {
      "pageSize": 10,
      "pageNumber": 0
    }
  }
  ```

#### **GET /books/{id}**
- **Descrição**: Recupera os detalhes de um livro específico pelo ID.
- **Resposta**: Retorna os detalhes do livro solicitado.
  ```json
  {
    "id": "id-único-do-livro",
    "title": "O Senhor dos Anéis",
    "author": "J.R.R. Tolkien",
    "isbn": "978-0-345-33968-3",
    "genre": "Fantasia",
    "language": "Português",
    "pages": 1216,
    "createdAt": "2025-03-16T10:00:00"
  }
  ```

#### **PUT /books/{id}**
- **Descrição**: Atualiza os detalhes de um livro existente.
- **Requisição**:
  ```json
  {
    "title": "O Hobbit",
    "author": "J.R.R. Tolkien",
    "isbn": "978-0-345-33968-4",
    "genre": "Fantasia",
    "language": "Português",
    "pages": 310
  }
  ```
- **Resposta**: Retorna as informações do livro atualizado.
  ```json
  {
    "id": "id-único-do-livro",
    "title": "O Hobbit",
    "author": "J.R.R. Tolkien",
    "isbn": "978-0-345-33968-4",
    "genre": "Fantasia",
    "language": "Português",
    "pages": 310,
    "createdAt": "2025-03-16T10:00:00"
  }
  ```

#### **DELETE /books/{id}**
- **Descrição**: Deleta um livro do sistema pelo ID.
- **Resposta**: Retorna uma mensagem de sucesso.
  ```json
  {
    "message": "Livro deletado com sucesso."
  }
  ```

### **Acompanhamento de Leituras**

#### **POST /readings/{bookId}**
- **Descrição**: Registra uma sessão de leitura para um livro.
- **Requisição**:
  ```json
  {
    "bookId": "id-único-do-livro",
    "trackingMethod": "PÁGINAS",
    "dailyGoal": 10,
    "startReadingDate": "2025-03-16T10:00:00"
  }
  ```
- **Resposta**: Retorna a sessão de leitura criada.
  ```json
  {
    "id": "id-único-da-leitura",
    "bookId": "id-único-do-livro",
    "bookTitle": "O Senhor dos Anéis",
    "progressInPercentage": 0.0,
    "totalProgress": 0,
    "pages": 1216,
    "chapters": 0,
    "readingState": "A_LER",
    "dailyGoal": 10,
    "startReadingDate": "2025-03-16T10:00:00",
    "endReadingDate": null,
    "estimatedCompletionDate": null
  }
  ```

#### **GET /readings/{bookId}**
- **Descrição**: Recupera todas as sessões de leitura de um livro específico.
- **Resposta**: Retorna uma lista de sessões de leitura para o livro solicitado.
  ```json
  [
    {
      "id": "id-único-da-leitura",
      "bookId": "id-único-do-livro",
      "bookTitle": "O Senhor dos Anéis",
      "progressInPercentage": 20.0,
      "totalProgress": 200,
      "pages": 1216,
      "chapters": 0,
      "readingState": "A_LER",
      "dailyGoal": 10,
      "startReadingDate": "2025-03-16T10:00:00",
      "endReadingDate": "2025-03-17T10:00:00",
      "estimatedCompletionDate": "2025-03-22T10:00:00"
    }
  ]
  ```

#### **POST /readings/add/{sessionId}**
- **Descrição**: Adiciona progresso a uma sessão de leitura existente.
- **Requisição**:
  ```json
  {
    "quantityRead": 20
  }
  ```
- **Resposta**: Retorna a sessão de leitura atualizada com o progresso adicionado.
  ```json
  {
    "id": "id-único-da-leitura",
    "bookId": "id-único-do-livro",
    "bookTitle": "O Senhor dos Anéis",
    "progressInPercentage": 20.0,
    "totalProgress": 220,
    "pages": 1216,
    "chapters": 0,
    "readingState": "A_LER",
    "dailyGoal": 10,
    "startReadingDate": "2025-03-16T10:00:00",
    "endReadingDate": "2025-03-17T10:00:00",
    "estimatedCompletionDate": "2025-03-22T10:00:00"
  }
  ```

</details>
